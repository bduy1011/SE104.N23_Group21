CREATE DATABASE QL_KS
GO
USE QL_KS
GO
CREATE TABLE THONGKE (
	MaThongKe NVARCHAR(10) PRIMARY KEY,
    MaLoaiPhong NVARCHAR(10),
    ThoiGian DATE,
	DoanhThu FLOAT,
    TiLe FLOAT,
)


CREATE TABLE HOADON (
    MaHoaDon NVARCHAR(10) PRIMARY KEY,
    MaNhanVien NVARCHAR(10),
	MaKhachHang NVARCHAR(10),
    TriGia FLOAT,
    NgayLap DATE
)


GO
CREATE TABLE KHACHHANG (
    MaKhachHang NVARCHAR(10) PRIMARY KEY,
    TenKhachHang NVARCHAR(70),
    CCCD NVARCHAR(20),
    GioiTinh NVARCHAR(5),
    NgaySinh DATE,
    SDT NVARCHAR(20),
    Email NVARCHAR(50)
)
GO
CREATE TABLE NHANVIEN (
    MaNhanVien NVARCHAR(10) PRIMARY KEY,
    TenNhanVien NVARCHAR(70),
    CCCD NVARCHAR(20),
    SDT NVARCHAR(20),
    BoPhan NVARCHAR(20),
	ChucVu NVARCHAR(20),
    NgaySinh DATE,
    GioiTinh NVARCHAR(5),
    TenTaiKhoan NVARCHAR(70),
    MatKhau NVARCHAR(20),
)
GO
CREATE TABLE CT_HOADON (
	MaHoaDon NVARCHAR(10),
	MaPhieuDatPhong NVARCHAR(10),
	ThanhTien FLOAT,
	PRIMARY KEY (MaHoaDon, MaPhieuDatPhong)
)
GO
CREATE TABLE PHIEUDATPHONG (
	MaPhieuDatPhong NVARCHAR(10) PRIMARY KEY,
	MaPhong NVARCHAR(10),
	SoNguoi SMALLINT,
	NgayDen DATE,
	NgayDi DATE,
	TienCoc FLOAT,
	MaKhachHang NVARCHAR(10)
)

GO
CREATE TABLE PHIEUSUDUNG (
	MaPhieu NVARCHAR(10) PRIMARY KEY,
	MaPhieuDatPhong NVARCHAR(10),
	TriGia FLOAT,
	NgayLap DATE
)
GO 
CREATE TABLE CT_PHIEUDICHVU (
	MaPhieu NVARCHAR(10),
	MaDichVu NVARCHAR(10),
	SoLuong SMALLINT,
	ThanhTien FLOAT,
	PRIMARY KEY (MaPhieu, MaDichVu) 
) 

GO
CREATE TABLE DICHVU (
	MaDichVu NVARCHAR(10) PRIMARY KEY,
	TenDichVu NVARCHAR(70),
	DonViTinh NVARCHAR(20),
	DonGia FLOAT,
	MaDonViTinh NVARCHAR(10)
)
GO
CREATE TABLE CT_PHIEUHANGHOA (
	MaPhieu NVARCHAR(10),
	MaHangHoa NVARCHAR(10),
	SoLuong SMALLINT,
	ThanhTien FLOAT,
	PRIMARY KEY (MaPhieu, MaHangHoa) 
)
GO
CREATE TABLE PHIEUNHAPHANG (
	MaPhieuNhapHang NVARCHAR(10) PRIMARY KEY,
	MaNhanVien NVARCHAR(10),
	NgayLap DATE,
	TriGia FLOAT
)
GO 
CREATE TABLE CT_PHIEUNHAPHANG (
	MaPhieuNhapHang NVARCHAR(10),
	MaHangHoa NVARCHAR(10),
	SoLuong SMALLINT,
	ThanhTien FLOAT,
	PRIMARY KEY (MaPhieuNhapHang, MaHangHoa) 
)

GO 
CREATE TABLE HANGHOA (
	MaHangHoa NVARCHAR(10) PRIMARY KEY,
	TenHangHoa NVARCHAR(70),
	SLTonKho SMALLINT, 
	DonVITinh NVARCHAR (20),
	DonGiaBan FLOAT,
	DonGiaNhap FLOAT,
	MaDonViTinh NVARCHAR(10)
)
GO 
CREATE TABLE PHONG (
	MaPhong NVARCHAR(10) PRIMARY KEY,
	MaLoaiPhong NVARCHAR(10),
	TrangThai NVARCHAR (20),
	GhiChu NVARCHAR (50)
)

GO 
CREATE TABLE LOAIPHONG (
	MaLoaiPhong NVARCHAR(10) PRIMARY KEY,
	TenLoaiPhong NVARCHAR(50),
	DonGia FLOAT 
)
GO 
CREATE TABLE DONVITINH (
	MaDonViTinh NVARCHAR(10) PRIMARY KEY,
	TenDonViTinh NVARCHAR(70),
)
GO
ALTER TABLE HOADON ADD CONSTRAINT FK_HD_KH FOREIGN KEY (MaKhachHang) REFERENCES KHACHHANG(MaKhachHang)
ALTER TABLE HOADON ADD CONSTRAINT FK_HD_NV FOREIGN KEY (MaNhanVien) REFERENCES NHANVIEN(MaNhanVien)
ALTER TABLE CT_HOADON ADD CONSTRAINT FK_CTHD_HD FOREIGN KEY (MaHoaDon) REFERENCES HOADON (MaHoaDon)
ALTER TABLE CT_HOADON ADD CONSTRAINT FK_CTHD_PDP FOREIGN KEY (MaPhieuDatPhong) REFERENCES PHIEUDATPHONG (MaPhieuDatPhong)
ALTER TABLE PHIEUDATPHONG ADD CONSTRAINT FK_PDP_P FOREIGN KEY (MaPhong) REFERENCES PHONG(MaPhong)
ALTER TABLE PHIEUDATPHONG ADD CONSTRAINT FK_PDP_KH FOREIGN KEY (MaPhong) REFERENCES KHAChHANG(MaKhachHang)
ALTER TABLE PHIEUSUDUNG ADD CONSTRAINT FK_PSD_PDP FOREIGN KEY (MaPhieuDatPhong) REFERENCES PHIEUDATPHONG (MaPhieuDatPhong)
ALTER TABLE CT_PHIEUNHAPHANG ADD CONSTRAINT FK_CTPNH_HH FOREIGN KEY (MaHangHoa) REFERENCES HANGHOA(MaHangHoa)
ALTER TABLE CT_PHIEUNHAPHANG ADD CONSTRAINT FK_CTPNH_PNH FOREIGN KEY (MaPhieuNhapHang) REFERENCES PHIEUNHAPHANG(MaPhieuNhapHang)
ALTER TABLE PHONG ADD CONSTRAINT FK_P_LP FOREIGN KEY (MaLoaiPhong) REFERENCES LOAIPHONG (MaLoaiPhong)
ALTER TABLE PHIEUNHAPHANG ADD CONSTRAINT FK_PNH_NV FOREIGN KEY (MaNhanVien) REFERENCES NHANVIEN(MaNhanVien)
ALTER TABLE CT_PHIEUHANGHOA ADD CONSTRAINT FK_CTPHH_PSD FOREIGN KEY (MaPhieu) REFERENCES PHIEUSUDUNG(MaPhieu)
ALTER TABLE CT_PHIEUHANGHOA ADD CONSTRAINT FK_CTPHH_HH FOREIGN KEY (MaHangHoa) REFERENCES HANGHOA(MaHangHoa)
ALTER TABLE CT_PHIEUDICHVU ADD CONSTRAINT FK_CTPDV_DV FOREIGN KEY (MaDichVu) REFERENCES DICHVU(MaDichVu)
ALTER TABLE CT_PHIEUDICHVU ADD CONSTRAINT FK_CTPDV_PSD FOREIGN KEY (MaPhieu) REFERENCES PHIEUSUDUNG(MaPhieu)
ALTER TABLE THONGKE ADD CONSTRAINT FK_TK_LP FOREIGN KEY (MaLoaiPhong) REFERENCES LOAIPHONG(MaLoaiPhong)
ALTER TABLE HANGHOA ADD CONSTRAINT FK_HH_DVT FOREIGN KEY (MaDonViTinh) REFERENCES DONVITINH(MaDonViTinh)
ALTER TABLE DICHVU ADD CONSTRAINT FK_DV_DVT FOREIGN KEY (MaDonViTinh) REFERENCES DONVITINH(MaDonViTinh)


INSERT INTO NHANVIEN VALUES (N'NV23520000', N'Huỳnh Tiến Phát', N'030201086999', N'0362123456', N'Nhân sự', N'Trưởng phòng', '2003/9/24', N'Nam', N'user24092003', N'12345678')
INSERT INTO NHANVIEN VALUES (N'NV23520016', N'Trần Ngọc', N'030201086888', N'0362123524', N'Nhân sự', N'Nhân viên', '2003/5/24', N'Nam', N'user1', N'pass1')
INSERT INTO NHANVIEN VALUES (N'NV23520001', N'Nguyễn Văn A', N'0123456789', N'0909123456', N'Nhân sự', N'Lễ tân', '1990/1/1', N'Nam', N'user123456', N'abcdefg')
INSERT INTO NHANVIEN VALUES (N'NV23520002', N'Nguyễn Thị B', N'0987654321', N'0909988776', N'Nhân sự', N'Thu ngân', '1995/5/5', N'Nữ', N'user987654', N'xyz123')
INSERT INTO NHANVIEN VALUES (N'NV23520003', N'Trần Văn C', N'0369852147', N'0912345678', N'Nhân sự', N'Phó phòng', '1998/12/31', N'Nam', N'user456789', N'password123')
INSERT INTO NHANVIEN VALUES (N'NV23520004', N'Nguyễn Văn A', N'010101123456', N'0362123123', N'Nhân sự', N'Lễ tân', '1980/1/1', N'Nam', N'user01011980', N'123123123')
INSERT INTO NHANVIEN VALUES (N'NV23520005', N'Trần Thị B', N'020202199999', N'0362212121', N'Kế toán', N'Trưởng phòng', '1990/2/20', N'Nữ', N'user02021990', N'321321321')
INSERT INTO NHANVIEN VALUES (N'NV23520006', N'Phạm Xuân C', N'030303012345', N'0362232323', N'Kế toán', N'Nhân viên', '2000/3/3', N'Nam', N'user03032020', N'123123123')
INSERT INTO NHANVIEN VALUES (N'NV23520007', N'Lê Thị D', N'040410054321', N'0362244444', N'Kế toán', N'Phó phòng', '1995/4/10', N'Nữ', N'user10041995', N'9999999')
INSERT INTO NHANVIEN VALUES (N'NV23520009', N'Lương Văn E', N'050505056789', N'0364565656', N'Kế toán', N'Nhân viên', '1970/5/5', N'Nam', N'user05051970', N'7777777')
INSERT INTO NHANVIEN VALUES (N'NV23520010', N'Nguyen Van Y', N'251225874123', N'0366258369', N'Kinh doanh', N'Trưởng phòng', '1974/12/25', N'Nam', N'user25121974', N'147258369')
INSERT INTO NHANVIEN VALUES (N'NV23520011', N'Hoang Thi Z', N'260126852147', N'0367258147', N'Kinh doanh', N'Nhân viên', '1972/1/26', N'Nữ', N'user26011972', N'369258147')
INSERT INTO NHANVIEN VALUES (N'NV23520012', N'Dang Van A1', N'271027123648', N'0367123648', N'Kinh doanh', N'Nhân viên', '1978/10/27', N'Nam', N'user27101978', N'48123648')
INSERT INTO NHANVIEN VALUES (N'NV23520013', N'Ngo Thi B1', N'280827539621', N'0367539621', N'Nhân sự', N'Lễ tân', '1975/8/28', N'Nữ', N'user28081975', N'6217539621')
INSERT INTO NHANVIEN VALUES (N'NV23520014', N'Pham Van C1', N'290929874532', N'0369258147', N'Nhân sự', N'Thu ngân', '1972/9/29', N'Nam', N'user29091972', N'52487453')


INSERT INTO KHACHHANG VALUES (N'KH10000', N'Huỳnh Thịnh Phát', N'030201086990', N'Nam', '2003/9/24', N'0362123457', N'2409huynhphat@gmail.com')
INSERT INTO KHACHHANG VALUES (N'KH10001', N'Nguyễn Văn X', N'0123456780', N'Nam', '1990/1/1', N'0909123457', N'nguyenvanx@gmail.com')
INSERT INTO KHACHHANG VALUES (N'KH10002', N'Nguyễn Thị O', N'0987654320', N'Nữ', '1995/5/5', N'0909988777', N'nguyenthio@gmail.com')
INSERT INTO KHACHHANG VALUES (N'KH10003', N'Trần Văn Y', N'0369852140', N'Nam', '1998/12/31', N'0912345677', N'tranvany@gmail.com')
INSERT INTO KHACHHANG VALUES (N'KH10004', N'Nguyễn Văn R', N'010101123450', N'Nam', '1980/1/1', N'0362123177', N'nguyenvanr@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10005', N'Trần Thị G', N'020202199990', N'Nữ', '1990/2/20', N'0362212177', N'tranthig@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10006', N'Phạm Xuân I', N'030303012340', N'Nam', '2000/3/3', N'0362232377', N'phamxuani@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10007', N'Lê Thị L', N'040410054320', N'Nữ', '1995/4/10', N'0362244444', N'lethil@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10009', N'Lương Văn P', N'050505056780', N'Nam', '1970/5/5', N'0364565656', N'luongvanp@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10010', N'Nguyen Van W', N'251225874120', N'Nam', '1974/12/25', N'0366258369', N'nguyenvanw@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10011', N'Hoang Thi Q', N'260126852140', N'Nữ', '1972/1/26', N'0367258147',N'hoangthiq@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10012', N'Dang Van T', N'271027123640', N'Nam', '1978/10/27', N'0367123648', N'dangvant@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10013', N'Ngo Thi E', N'280827539620', N'Nữ', '1975/8/28', N'0367539621', N'ngothie@email.com')
INSERT INTO KHACHHANG VALUES (N'KH10014', N'Pham Van D', N'290929874530', N'Nam', '1972/9/29', N'0369258147', N'phamvand@email.com')
